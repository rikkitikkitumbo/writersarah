var WriterSarah;WriterSarah=void 0;WriterSarah=angular.module("WriterSarah",["restangular","ui.router","xeditable","ui.sortable","ngAnimate"]);WriterSarah.config(["$httpProvider",function($httpProvider){$httpProvider.defaults.headers.common["X-CSRF-Token"]=$("meta[name=csrf-token]").attr("content");return $httpProvider.defaults.headers.common.Accept="application/json"}]);WriterSarah.run(function(editableOptions){return editableOptions.theme="bs3"});WriterSarah.controller("CatsController",function($scope,$http,Restangular,$stateParams){$scope.sortableOptions={stop:function(){return $scope.make_article_order_array()}};$scope.make_article_order_array=function(){var g,list,positions,_i,_len;positions=[];list=$scope.articles;for(_i=0,_len=list.length;_i<_len;_i++){g=list[_i];positions.push(g.id)}console.log(positions);return $scope.putOrder_array($scope.cat,positions)};$scope.putOrder_array=function(catt,order_array){var cat;cat=catt;cat.order_array=order_array.toString();return cat.put()};$scope.getCat=function(){var id;id=$scope.paramsId();return Restangular.one("api/v1/cats",id).get().then(function(response){return $scope.cat=response})};$scope.gettCats=function(){return Restangular.all("api/v1/cats").getList().then(function(response){return $scope.cats=response})};$scope.getTitle=function(){return $scope.title=$stateParams.title};$scope.paramsId=function(){switch(false){case $stateParams.title!=="Magazine":return 1;case $stateParams.title!=="Coorperate Copywright":return 2;case $stateParams.title!=="Novels":return 3}};$scope.getArticles=function(){var id;id=$scope.paramsId();return Restangular.one("api/v1/cats",id).getList("articles").then(function(response){return $scope.articles=response})};$scope.getAllArticles=function(){return Restangular.all("api/v1/allarticles").getList().then(function(response){return $scope.allarticles=response})};$scope.clearArticle=function(){return $scope.article={}};$scope.MakeCat_id=function(article){switch(false){case article.cat_title!=="Magazine":return article.cat_id=1;case article.cat_title!=="Coorperate Copywright":return article.cat_id=2;case article.cat_title!=="Novels":return article.cat_id=3}};$scope.saveArticle=function(article){article.cat_title=$stateParams.title;$scope.MakeCat_id(article);return Restangular.all("api/v1/allarticles").post(article).then(function(){return Restangular.all("api/v1/allarticles").getList().then(function(response){var new_article;new_article=response[0];$scope.articles.unshift(new_article);$scope.make_article_order_array();return $scope.clearArticle()})})};$scope.deleteArticle=function(article){var id,indexx;id=$scope.paramsId();if(confirm('Are you sure you want to delete "'+article.title+'"?')){indexx=$scope.articles.indexOf(article);return $http["delete"]("api/v1/cats/"+id+"/articles/"+article.id).then(function(){$scope.articles.removeAt(indexx);return console.log("deleted "+indexx)})}};$scope.editArticle=function(article){return $scope.article=article};$scope.user_authenticated=function(){return $scope.authenticated};$scope.starts_with_http=function(data){console.log(data);if(data.substring(0,7)!=="http://"){return"make sure url starts with http://"}};$scope.putArticle=function(article){$scope.MakeCat_id(article);article.cat_title=$stateParams.title;return article.put()};return $scope.putCat=function(cat){return cat.put().then(function(){return $scope.cat=cat})}});WriterSarah.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.when("","/about").otherwise("/");return $stateProvider.state("app",{url:"/",templateUrl:"assets/cats/cat_index.html.slim",controller:"CatsController"}).state("app.show",{url:"category/:title",templateUrl:"/assets/cats/cat_show.html.slim",controller:"CatsController"}).state("app.about",{url:"about",templateUrl:"/assets/cats/cat_about.html.slim",controller:"CatsController"}).state("app.contact",{url:"contact",templateUrl:"/assets/cats/cat_contact.html.slim",controller:"CatsController"}).state("edit",{url:"/",templateUrl:"/assets/cats/edit/edit_cat_index.html.slim",controller:"CatsController"}).state("edit.show",{url:"edit/category/:title",templateUrl:"/assets/cats/edit/edit_cat_show.html.slim",controller:"CatsController"}).state("edit.about",{url:"edit/about",templateUrl:"/assets/cats/edit/edit_cat_about.html.slim",controller:"CatsController"}).state("edit.contact",{url:"edit/contact",templateUrl:"/assets/cats/edit/edit_cat_contact.html.slim",controller:"CatsController"})});$(document).ready(function(){$('body').hide().fadeIn(1000)});
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file.
//
// Read Sprockets README (https://github.com/sstephenson/sprockets#sprockets-directives) for details
// about supported directives.
//


;
